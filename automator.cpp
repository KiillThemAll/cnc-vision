#include "automator.h"
#include <math.h>

Automator::Automator(QObject *parent) : QObject(parent)
{
    m_working = false;
    m_enabled = false;
    m_mcConnected = false;
    m_lastdzValid = false;
    m_lastCoordsValid = false;
    m_message = "Waiting for pause";
    m_autosendB = false;
    m_autosendPower = false;
    m_minPower = 1.0;
    m_maxPower = 0.8;
    m_lastSentPower = 0.0;
    m_powerTimer.setInterval(1000); // maximum power update rate [ms]
    m_powerTimer.setSingleShot(true);

    m_mcs_b_initial = 0;
    m_mcs_x_check_state = 0;
    m_mcs_y_check_state = 0;
}

bool Automator::working() const
{
    return m_working;
}

void Automator::ondzChanged(float dz)
{
    m_lastdz = dz;
}

void Automator::ondzValidChanged(bool valid)
{
    m_lastdzValid = valid;
    checkWorkingState();
}

void Automator::onMcConnectionStateChanged(bool connected)
{
    m_mcConnected = connected;
    checkWorkingState();
}

void Automator::onRayConnectionStateChanged(bool connected)
{
    m_lastCoordsValid = connected;
}

void Automator::onCoordsChanged(float x, float y, float z, float b)
{
    Q_UNUSED(z);
    m_mcs_x = x;
    m_mcs_y = y;
    m_mcs_b = b;

    if (!m_autosendPower)
        return;

    if (m_maxPower < m_minPower)
        return;

    if (m_powerTimer.isActive())
        return;

    const float maxX = 2200;
    const float minX = 600;
    const float maxY = 1500;
    const float minY = 0;
    const float dPower = 0.01;
    float airPathLength = (maxX - m_mcs_x) + (maxY - m_mcs_y);
    const float maximumAirPathLength = (maxX - minX) + (maxY - minY);
    float powerSpan = m_maxPower - m_minPower;
    float dist = airPathLength / maximumAirPathLength;
    float targetPower = m_minPower + powerSpan * dist;

    if (fabs(targetPower - m_lastSentPower) < dPower)
        return;

    m_lastSentPower = targetPower;
    emit changePower(m_lastSentPower / 5.0);

    m_powerTimer.start();
}

void Automator::onMcStateChanged(RayReceiver::State s)
{
    if (!m_working)
        return;
    if (s == RayReceiver::Paused) {
        //QThread::sleep(10);
        if(m_mcs_x_check_state != m_mcs_x && m_mcs_y_check_state != m_mcs_y)
        {
           m_mcs_x_check_state = m_mcs_x;
           m_mcs_y_check_state = m_mcs_y;
           return;
        }
        float compensated = compensate(m_lastdz);
        if (compensated > 10) {
            m_message = "No entry in comp table";
            emit messageChanged();
        } else {
            float targetB = m_mcs_b_initial + compensated;
            QString correction = QString("G90 G0 B%1\n").arg(targetB);
            m_message = correction;
            if (m_autosendB) {
                emit sendToMC(correction);
                emit sendToMC("M24\n");
                QThread::msleep(100);
            }
        }
    }
}

float Automator::compensate(float dz) const
{
    //                   CAM     ERROR
    const float map[] = {108,	2.11497190323067,
                         107.9,	2.11568618514411,
                         107.8,	2.11639574470582,
                         107.7,	2.11710058191579,
                         107.6,	2.11780069677404,
                         107.5,	2.11849608928055,
                         107.4,	2.11918675943534,
                         107.3,	2.11987270723839,
                         107.2,	2.12055393268971,
                         107.1,	2.1212304357893,
                         107,	2.12190221653716,
                         106.9,	2.12256927493329,
                         106.8,	2.12323161097769,
                         106.7,	2.12388922467036,
                         106.6,	2.12454211601129,
                         106.5,	2.1251902850005,
                         106.4,	2.12583373163797,
                         106.3,	2.12647245592371,
                         106.2,	2.12710645785772,
                         106.1,	2.12773573744,
                         106,	2.12836029467055,
                         105.9,	2.12898012954937,
                         105.8,	2.12959524207646,
                         105.7,	2.13020563225182,
                         105.6,	2.13081130007544,
                         105.5,	2.13141224554733,
                         105.4,	2.1320084686675,
                         105.3,	2.13259996943593,
                         105.2,	2.13318674785263,
                         105.1,	2.1337688039176,
                         105,	2.13434613763084,
                         104.9,	2.13491874899235,
                         104.8,	2.13548663800212,
                         104.7,	2.13604980466017,
                         104.6,	2.13660824896648,
                         104.5,	2.13716197092107,
                         104.4,	2.13771097052392,
                         104.3,	2.13825524777504,
                         104.2,	2.13879480267443,
                         104.1,	2.13932963522209,
                         104,	2.13985974541802,
                         103.9,	2.14038513326222,
                         103.8,	2.14090579875468,
                         103.7,	2.14142174189542,
                         103.6,	2.14193296268442,
                         103.5,	2.1424394611217,
                         103.4,	2.14294123720724,
                         103.3,	2.14343829094105,
                         103.2,	2.14393062232313,
                         103.1,	2.14441823135348,
                         103,	2.1449011180321,
                         102.9,	2.14537928235898,
                         102.8,	2.14585272433414,
                         102.7,	2.14632144395756,
                         102.6,	2.14678544122926,
                         102.5,	2.14724471614922,
                         102.4,	2.14769926871745,
                         102.3,	2.14814909893395,
                         102.2,	2.14859420679872,
                         102.1,	2.14903459231176,
                         102,	2.14947025547307,
                         101.9,	2.14990119628264,
                         101.8,	2.15032741474049,
                         101.7,	2.1507489108466,
                         101.6,	2.15116568460099,
                         101.5,	2.15157773600364,
                         101.4,	2.15198506505456,
                         101.3,	2.15238767175375,
                         101.2,	2.15278555610121,
                         101.1,	2.15317871809694,
                         101,	2.15356715774093,
                         100.9,	2.1539508750332,
                         100.8,	2.15432986997374,
                         100.7,	2.15470414256254,
                         100.6,	2.15507369279961,
                         100.5,	2.15543852068495,
                         100.4,	2.15579862621856,
                         100.3,	2.15615400940044,
                         100.2,	2.15650467023059,
                         100.1,	2.15685060870901,
                         100,	2.1571918248357,
                         99.9,	2.15752831861065,
                         99.8,	2.15786009003388,
                         99.7,	2.15818713910537,
                         99.6,	2.15850946582513,
                         99.5,	2.15882707019316,
                         99.4,	2.15913995220946,
                         99.3,	2.15944811187403,
                         99.2,	2.15975154918687,
                         99.1,	2.16005026414798,
                         99,	2.16034425675736,
                         98.9,	2.160633527015,
                         98.8,	2.16091807492091,
                         98.7,	2.1611979004751,
                         98.6,	2.16147300367755,
                         98.5,	2.16174338452827,
                         98.4,	2.16200904302726,
                         98.3,	2.16226997917452,
                         98.2,	2.16252619297005,
                         98.1,	2.16277768441384,
                         98,	2.16302445350591,
                         97.9,	2.16326650024624,
                         97.8,	2.16350382463485,
                         97.7,	2.16373642667172,
                         97.6,	2.16396430635686,
                         97.5,	2.16418746369027,
                         97.4,	2.16440589867195,
                         97.3,	2.1646196113019,
                         97.2,	2.16482860158011,
                         97.1,	2.1650328695066,
                         97,	2.16523241508136,
                         96.9,	2.16542723830438,
                         96.8,	2.16561733917567,
                         96.7,	2.16580271769524,
                         96.6,	2.16598337386307,
                         96.5,	2.16615930767917,
                         96.4,	2.16633051914353,
                         96.3,	2.16649700825617,
                         96.2,	2.16665877501708,
                         96.1,	2.16681581942626,
                         96,	2.1669681414837,
                         95.9,	2.16711574118941,
                         95.8,	2.1672586185434,
                         95.7,	2.16739677354565,
                         95.6,	2.16753020619617,
                         95.5,	2.16765891649496,
                         95.4,	2.16778290444202,
                         95.3,	2.16790217003734,
                         95.2,	2.16801671328094,
                         95.1,	2.1681265341728,
                         95,	2.16823163271294,
                         94.9,	2.16833200890134,
                         94.8,	2.16842766273801,
                         94.7,	2.16851859422295,
                         94.6,	2.16860480335617,
                         94.5,	2.16868629013764,
                         94.4,	2.16876305456739,
                         94.3,	2.16883509664541,
                         94.2,	2.16890241637169,
                         94.1,	2.16896501374625,
                         94,	2.16902288876907,
                         93.9,	2.16907604144017,
                         93.8,	2.16912447175953,
                         93.7,	2.16916817972716,
                         93.6,	2.16920716534306,
                         93.5,	2.16924142860723,
                         93.4,	2.16927096951966,
                         93.3,	2.16929578808037,
                         93.2,	2.16931588428934,
                         93.1,	2.16933125814659,
                         93,	2.1693419096521,
                         92.9,	2.16934783880588,
                         92.8,	2.16934904560794,
                         92.7,	2.16934553005826,
                         92.6,	2.16933729215685,
                         92.5,	2.1693243319037,
                         92.4,	2.16930664929883,
                         92.3,	2.16928424434223,
                         92.2,	2.16925711703389,
                         92.1,	2.16922526737382,
                         92,	2.16918869536203,
                         91.9,	2.1691474009985,
                         91.8,	2.16910138428324,
                         91.7,	2.16905064521625,
                         91.6,	2.16899518379753,
                         91.5,	2.16893500002708,
                         91.4,	2.16887009390489,
                         91.3,	2.16880046543098,
                         91.2,	2.16872611460533,
                         91.1,	2.16864704142796,
                         91,	2.16856324589885,
                         90.9,	2.16847472801801,
                         90.8,	2.16838148778544,
                         90.7,	2.16828352520114,
                         90.6,	2.16818084026511,
                         90.5,	2.16807343297734,
                         90.4,	2.16796130333785,
                         90.3,	2.16784445134663,
                         90.2,	2.16772287700367,
                         90.1,	2.16759658030898,
                         90,	2.16746556126256,
                         89.9,	2.16732981986441,
                         89.8,	2.16718935611453,
                         89.7,	2.16704417001292,
                         89.6,	2.16689426155958,
                         89.5,	2.16673963075451,
                         89.4,	2.1665802775977,
                         89.3,	2.16641620208917,
                         89.2,	2.1662474042289,
                         89.1,	2.1660738840169,
                         89,	2.16589564145317,
                         88.9,	2.16571267653771,
                         88.8,	2.16552498927052,
                         88.7,	2.1653325796516,
                         88.6,	2.16513544768095,
                         88.5,	2.16493359335857,
                         88.4,	2.16472701668445,
                         88.3,	2.1645157176586,
                         88.2,	2.16429969628103,
                         88.1,	2.16407895255172,
                         88,	2.16385348647068,
                         87.9,	2.16362329803791,
                         87.8,	2.16338838725341,
                         87.7,	2.16314875411718,
                         87.6,	2.16290439862921,
                         87.5,	2.16265532078952,
                         87.4,	2.16240152059809,
                         87.3,	2.16214299805494,
                         87.2,	2.16187975316005,
                         87.1,	2.16161178591343,
                         87,	2.16133909631508,
                         86.9,	2.161061684365,
                         86.8,	2.16077955006319,
                         86.7,	2.16049269340965,
                         86.6,	2.16020111440437,
                         86.5,	2.15990481304737,
                         86.4,	2.15960378933863,
                         86.3,	2.15929804327817,
                         86.2,	2.15898757486597,
                         86.1,	2.15867238410204,
                         86,	2.15835247098638,
                         85.9,	2.15802783551899,
                         85.8,	2.15769847769987,
                         85.7,	2.15736439752901,
                         85.6,	2.15702559500643,
                         85.5,	2.15668207013211,
                         85.4,	2.15633382290607,
                         85.3,	2.15598085332829,
                         85.2,	2.15562316139878,
                         85.1,	2.15526074711754,
                         85,	2.15489361048457,
                         84.9,	2.15452175149987,
                         84.8,	2.15414517016344,
                         84.7,	2.15376386647527,
                         84.6,	2.15337784043538,
                         84.5,	2.15298709204375,
                         84.4,	2.1525916213004,
                         84.3,	2.15219142820531,
                         84.2,	2.15178651275849,
                         84.1,	2.15137687495994,
                         84,	2.15096251480966,
                         83.9,	2.15054343230765,
                         83.8,	2.1501196274539,
                         83.7,	2.14969110024843,
                         83.6,	2.14925785069122,
                         83.5,	2.14881987878229,
                         83.4,	2.14837718452162,
                         83.3,	2.14792976790922,
                         83.2,	2.14747762894509,
                         83.1,	2.14702076762923,
                         83,	2.14655918396164,
                         82.9,	2.14609287794232,
                         82.8,	2.14562184957127,
                         82.7,	2.14514609884848,
                         82.6,	2.14466562577397,
                         82.5,	2.14418043034772,
                         82.4,	2.14369051256974,
                         82.3,	2.14319587244003,
                         82.2,	2.14269650995859,
                         82.1,	2.14219242512542,
                         82,	2.14168361794052,
                         81.9,	2.14117008840389,
                         81.8,	2.14065183651552,
                         81.7,	2.14012886227543,
                         81.6,	2.1396011656836,
                         81.5,	2.13906874674004,
                         81.4,	2.13853160544476,
                         81.3,	2.13798974179774,
                         81.2,	2.13744315579899,
                         81.1,	2.13689184744851,
                         81,	2.13633581674629,
                         80.9,	2.13577506369235,
                         80.8,	2.13520958828668,
                         80.7,	2.13463939052927,
                         80.6,	2.13406447042013,
                         80.5,	2.13348482795927,
                         80.4,	2.13290046314667,
                         80.3,	2.13231137598234,
                         80.2,	2.13171756646628,
                         80.1,	2.13111903459849,
                         80,	2.13051578037896,
                         79.9,	2.12990780380771,
                         79.8,	2.12929510488472,
                         79.7,	2.12867768361001,
                         79.6,	2.12805553998356,
                         79.5,	2.12742867400538,
                         79.4,	2.12679708567547,
                         79.3,	2.12616077499383,
                         79.2,	2.12551974196046,
                         79.1,	2.12487398657536,
                         79,	2.12422350883853,
                         78.9,	2.12356830874996,
                         78.8,	2.12290838630967,
                         78.7,	2.12224374151764,
                         78.6,	2.12157437437388,
                         78.5,	2.12090028487839,
                         78.4,	2.12022147303118,
                         78.3,	2.11953793883222,
                         78.2,	2.11884968228154,
                         78.1,	2.11815670337913,
                         78,	2.11745900212499,
                         77.9,	2.11675657851911,
                         77.8,	2.11604943256151,
                         77.7,	2.11533756425217,
                         77.6,	2.1146209735911,
                         77.5,	2.1138996605783,
                         77.4,	2.11317362521377,
                         77.3,	2.11244286749751,
                         77.2,	2.11170738742952,
                         77.1,	2.1109671850098,
                         77,	2.11022226023834,
                         76.9,	2.10947261311516,
                         76.8,	2.10871824364024,
                         76.7,	2.10795915181359,
                         76.6,	2.10719533763521,
                         76.5,	2.1064268011051,
                         76.4,	2.10565354222326,
                         76.3,	2.10487556098969,
                         76.2,	2.10409285740439,
                         76.1,	2.10330543146736,
                         76,	2.10251328317859,
                         75.9,	2.1017164125381,
                         75.8,	2.10091481954587,
                         75.7,	2.10010850420191,
                         75.6,	2.09929746650622,
                         75.5,	2.0984817064588,
                         75.4,	2.09766122405965,
                         75.3,	2.09683601930877,
                         75.2,	2.09600609220616,
                         75.1,	2.09517144275181,
                         75,	2.09433207094574,
                         74.9,	2.09348797678793,
                         74.8,	2.09263916027839,
                         74.7,	2.09178562141713,
                         74.6,	2.09092736020413,
                         74.5,	2.0900643766394,
                         74.4,	2.08919667072293,
                         74.3,	2.08832424245474,
                         74.2,	2.08744709183482,
                         74.1,	2.08656521886316,
                         74,	2.08567862353978,
                         73.9,	2.08478730586466,
                         73.8,	2.08389126583781,
                         73.7,	2.08299050345923,
                         73.6,	2.08208501872893,
                         73.5,	2.08117481164688,
                         73.4,	2.08025988221311,
                         73.3,	2.07934023042761,
                         73.2,	2.07841585629038,
                         73.1,	2.07748675980141,
                         73,	2.07655294096071,
                         72.9,	2.07561439976829,
                         72.8,	2.07467113622413,
                         72.7,	2.07372315032824,
                         72.6,	2.07277044208062,
                         72.5,	2.07181301148127,
                         72.4,	2.07085085853019,
                         72.3,	2.06988398322737,
                         72.2,	2.06891238557283,
                         72.1,	2.06793606556655,
                         72,	2.06695502320855,
                         71.9,	2.06596925849881,
                         71.8,	2.06497877143734,
                         71.7,	2.06398356202414,
                         71.6,	2.06298363025921,
                         71.5,	2.06197897614255,
                         71.4,	2.06096959967415,
                         71.3,	2.05995550085403,
                         71.2,	2.05893667968218,
                         71.1,	2.05791313615859,
                         71,	2.05688487028327,
                         70.9,	2.05585188205623,
                         70.8,	2.05481417147745,
                         70.7,	2.05377173854694,
                         70.6,	2.05272458326469,
                         70.5,	2.05167270563072,
                         70.4,	2.05061610564502,
                         70.3,	2.04955478330758,
                         70.2,	2.04848873861842,
                         70.1,	2.04741797157752,
                         70,	2.0463424821849,
                         69.9,	2.04526227044054,
                         69.8,	2.04417733634445,
                         69.7,	2.04308767989663,
                         69.6,	2.04199330109707,
                         69.5,	2.04089419994579,
                         69.4,	2.03979037644278,
                         69.3,	2.03868183058803,
                         69.2,	2.03756856238156,
                         69.1,	2.03645057182335,
                         69,	2.03532785891341,
                         68.9,	2.03420042365174,
                         68.8,	2.03306826603834,
                         68.7,	2.03193138607321,
                         68.6,	2.03078978375635,
                         68.5,	2.02964345908776,
                         68.4,	2.02849241206743,
                         68.3,	2.02733664269538,
                         68.2,	2.02617615097159,
                         68.1,	2.02501093689607,
                         68,	2.02384100046883,
                         67.9,	2.02266634168985,
                         67.8,	2.02148696055914,
                         67.7,	2.02030285707669,
                         67.6,	2.01911403124252,
                         67.5,	2.01792048305662,
                         67.4,	2.01672221251898,
                         67.3,	2.01551921962962,
                         67.2,	2.01431150438852,
                         67.1,	2.01309906679569,
                         67,	2.01188190685113,
                         66.9,	2.01066002455484,
                         66.8,	2.00943341990682,
                         66.7,	2.00820209290707,
                         66.6,	2.00696604355559,
                         66.5,	2.00572527185237,
                         66.4,	2.00447977779743,
                         66.3,	2.00322956139075,
                         66.2,	2.00197462263234,
                         66.1,	2.00071496152221,
                         66,	1.99945057806034,
                         65.9,	1.99818147224674,
                         65.8,	1.99690764408141,
                         65.7,	1.99562909356434,
                         65.6,	1.99434582069555,
                         65.5,	1.99305782547503,
                         65.4,	1.99176510790277,
                         65.3,	1.99046766797878,
                         65.2,	1.98916550570307,
                         65.1,	1.98785862107562,
                         65,	1.98654701409644,
                         64.9,	1.98523068476553,
                         64.8,	1.98390963308288,
                         64.7,	1.98258385904851,
                         64.6,	1.98125336266241,
                         64.5,	1.97991814392457,
                         64.4,	1.97857820283501,
                         64.3,	1.97723353939371,
                         64.2,	1.97588415360068,
                         64.1,	1.97453004545592,
                         64,	1.97317121495943,
                         63.9,	1.97180766211121,
                         63.8,	1.97043938691126,
                         63.7,	1.96906638935957,
                         63.6,	1.96768866945616,
                         63.5,	1.96630622720101,
                         63.4,	1.96491906259414,
                         63.3,	1.96352717563553,
                         63.2,	1.96213056632519,
                         63.1,	1.96072923466312,
                         63,	1.95932318064932,
                         62.9,	1.95791240428379,
                         62.8,	1.95649690556653,
                         62.7,	1.95507668449753,
                         62.6,	1.95365174107681,
                         62.5,	1.95222207530435,
                         62.4,	1.95078768718016,
                         62.3,	1.94934857670425,
                         62.2,	1.9479047438766,
                         62.1,	1.94645618869722,
                         62,	1.9450029111661,
                         61.9,	1.94354491128326,
                         61.8,	1.94208218904869,
                         61.7,	1.94061474446239,
                         61.6,	1.93914257752435,
                         61.5,	1.93766568823458,
                         61.4,	1.93618407659309,
                         61.3,	1.93469774259986,
                         61.2,	1.9332066862549,
                         61.1,	1.93171090755821,
                         61,	1.93021040650979,
                         60.9,	1.92870518310963,
                         60.8,	1.92719523735775,
                         60.7,	1.92568056925413,
                         60.6,	1.92416117879879,
                         60.5,	1.92263706599171,
                         60.4,	1.9211082308329,
                         60.3,	1.91957467332236,
                         60.2,	1.91803639346009,
                         60.1,	1.91649339124609,
                         60,	1.91494566668036,
                         59.9,	1.9133932197629,
                         59.8,	1.9118360504937,
                         59.7,	1.91027415887278,
                         59.6,	1.90870754490012,
                         59.5,	1.90713620857573,
                         59.4,	1.90556014989962,
                         59.3,	1.90397936887177,
                         59.2,	1.90239386549219,
                         59.1,	1.90080363976087,
                         59,	1.89920869167783,
                         58.9,	1.89760902124306,
                         58.8,	1.89600462845655,
                         58.7,	1.89439551331832,
                         58.6,	1.89278167582835,
                         58.5,	1.89116311598665,
                         58.4,	1.88953983379322,
                         58.3,	1.88791182924806,
                         58.2,	1.88627910235117,
                         58.1,	1.88464165310255,
                         58,	1.8829994815022,
                         57.9,	1.88135258755011,
                         57.8,	1.8797009712463,
                         57.7,	1.87804463259075,
                         57.6,	1.87638357158348,
                         57.5,	1.87471778822447,
                         57.4,	1.87304728251373,
                         57.3,	1.87137205445126,
                         57.2,	1.86969210403706,
                         57.1,	1.86800743127112,
                         57,	1.86631803615346,
                         56.9,	1.86462391868406,
                         56.8,	1.86292507886294,
                         56.7,	1.86122151669008,
                         56.6,	1.85951323216549,
                         56.5,	1.85780022528918,
                         56.4,	1.85608249606113,
                         56.3,	1.85436004448135,
                         56.2,	1.85263287054983,
                         56.1,	1.85090097426659,
                         56,	1.84916435563162,
                         55.9,	1.84742301464491,
                         55.8,	1.84567695130648,
                         55.7,	1.84392616561631,
                         55.6,	1.84217065757441,
                         55.5,	1.84041042718078,
                         55.4,	1.83864547443542,
                         55.3,	1.83687579933833,
                         55.2,	1.83510140188951,
                         55.1,	1.83332228208895,
                         55,	1.83153843993667,
                         54.9,	1.82974987543265,
                         54.8,	1.82795658857691,
                         54.7,	1.82615857936943,
                         54.6,	1.82435584781022,
                         54.5,	1.82254839389928,
                         54.4,	1.82073621763661,
                         54.3,	1.81891931902221,
                         54.2,	1.81709769805607,
                         54.1,	1.81527135473821,
                         54,	1.81344028906862,
                         53.9,	1.81160450104729,
                         53.8,	1.80976399067423,
                         53.7,	1.80791875794944,
                         53.6,	1.80606880287293,
                         53.5,	1.80421412544468,
                         53.4,	1.80235472566469,
                         53.3,	1.80049060353298,
                         53.2,	1.79862175904954,
                         53.1,	1.79674819221436,
                         53,	1.79486990302746,
                         52.9,	1.79298689148882,
                         52.8,	1.79109915759845,
                         52.7,	1.78920670135636,
                         52.6,	1.78730952276253,
                         52.5,	1.78540762181697,
                         52.4,	1.78350099851967,
                         52.3,	1.78158965287065,
                         52.2,	1.7796735848699,
                         52.1,	1.77775279451741,
                         52,	1.7758272818132,
                         51.9,	1.77389704675725,
                         51.8,	1.77196208934957,
                         51.7,	1.77002240959016,
                         51.6,	1.76807800747902,
                         51.5,	1.76612888301615,
                         51.4,	1.76417503620155,
                         51.3,	1.76221646703522,
                         51.2,	1.76025317551715,
                         51.1,	1.75828516164736,
                         51,	1.75631242542583,
                         50.9,	1.75433496685257,
                         50.8,	1.75235278592758,
                         50.7,	1.75036588265087,
                         50.6,	1.74837425702242,
                         50.5,	1.74637790904223,
                         50.4,	1.74437683871032,
                         50.3,	1.74237104602668,
                         50.2,	1.7403605309913,
                         50.1,	1.7383452936042,
                         50,	1.73632533386536,
                         49.9,	1.73430065177479,
                         49.8,	1.73227124733249,
                         49.7,	1.73023712053846,
                         49.6,	1.7281982713927,
                         49.5,	1.72615469989521,
                         49.4,	1.72410640604599,
                         49.3,	1.72205338984503,
                         49.2,	1.71999565129235,
                         49.1,	1.71793319038793,
                         49,	1.71586600713178,
                         48.9,	1.71379410152391,
                         48.8,	1.7117174735643,
                         48.7,	1.70963612325296,
                         48.6,	1.70755005058988,
                         48.5,	1.70545925557508,
                         48.4,	1.70336373820855,
                         48.3,	1.70126349849028,
                         48.2,	1.69915853642029,
                         48.1,	1.69704885199856,
                         48,	1.6949344452251,
                         47.9,	1.69281531609991,
                         47.8,	1.69069146462299,
                         47.7,	1.68856289079434,
                         47.6,	1.68642959461396,
                         47.5,	1.68429157608185,
                         47.4,	1.68214883519801,
                         47.3,	1.68000137196243,
                         47.2,	1.67784918637512,
                         47.1,	1.67569227843609,
                         47,	1.67353064814532,
                         46.9,	1.67136429550282,
                         46.8,	1.66919322050859,
                         46.7,	1.66701742316263,
                         46.6,	1.66483690346494,
                         46.5,	1.66265166141551,
                         46.4,	1.66046169701436,
                         46.3,	1.65826701026147,
                         46.2,	1.65606760115685,
                         46.1,	1.65386346970051,
                         46,	1.65165461589243,
                         45.9,	1.64944103973262,
                         45.8,	1.64722274122108,
                         45.7,	1.64499972035781,
                         45.6,	1.6427719771428,
                         45.5,	1.64053951157607,
                         45.4,	1.6383023236576,
                         45.3,	1.63606041338741,
                         45.2,	1.63381378076548,
                         45.1,	1.63156242579182,
                         45,	1.62930634846643,
                         44.9,	1.62704554878931,
                         44.8,	1.62478002676046,
                         44.7,	1.62250978237988,
                         44.6,	1.62023481564757,
                         44.5,	1.61795512656352,
                         44.4,	1.61567071512775,
                         44.3,	1.61338158134024,
                         44.2,	1.611087725201,
                         44.1,	1.60878914671003,
                         44,	1.60648584586734,
                         43.9,	1.6041778226729,
                         43.8,	1.60186507712674,
                         43.7,	1.59954760922885,
                         43.6,	1.59722541897923,
                         43.5,	1.59489850637787,
                         43.4,	1.59256687142479,
                         43.3,	1.59023051411997,
                         43.2,	1.58788943446342,
                         43.1,	1.58554363245514,
                         43,	1.58319310809513,
                         42.9,	1.58083786138339,
                         42.8,	1.57847789231992,
                         42.7,	1.57611320090471,
                         42.6,	1.57374378713778,
                         42.5,	1.57136965101911,
                         42.4,	1.56899079254872,
                         42.3,	1.56660721172659,
                         42.2,	1.56421890855273,
                         42.1,	1.56182588302714,
                         42,	1.55942813514982,
                         41.9,	1.55702566492077,
                         41.8,	1.55461847233999,
                         41.7,	1.55220655740747,
                         41.6,	1.54978992012323,
                         41.5,	1.54736856048725,
                         41.4,	1.54494247849955,
                         41.3,	1.54251167416011,
                         41.2,	1.54007614746894,
                         41.1,	1.53763589842604,
                         41,	1.53519092703141,
                         40.9,	1.53274123328505,
                         40.8,	1.53028681718695,
                         40.7,	1.52782767873713,
                         40.6,	1.52536381793558,
                         40.5,	1.52289523478229,
                         40.4,	1.52042192927727,
                         40.3,	1.51794390142052,
                         40.2,	1.51546115121204,
                         40.1,	1.51297367865183,
                         40,	1.51048148373989,
                         39.9,	1.50798456647622,
                         39.8,	1.50548292686082,
                         39.7,	1.50297656489368,
                         39.6,	1.50046548057482,
                         39.5,	1.49794967390422,
                         39.4,	1.49542914488189,
                         39.3,	1.49290389350783,
                         39.2,	1.49037391978204,
                         39.1,	1.48783922370452,
                         39,	1.48529980527527,
                         38.9,	1.48275566449429,
                         38.8,	1.48020680136157,
                         38.7,	1.47765321587713,
                         38.6,	1.47509490804095,
                         38.5,	1.47253187785304,
                         38.4,	1.46996412531341,
                         38.3,	1.46739165042204,
                         38.2,	1.46481445317894,
                         38.1,	1.4622325335841,
                         38,	1.45964589163754,
                         37.9,	1.45705452733925,
                         37.8,	1.45445844068922,
                         37.7,	1.45185763168747,
                         37.6,	1.44925210033398,
                         37.5,	1.44664184662876,
                         37.4,	1.44402687057182,
                         37.3,	1.44140717216314,
                         37.2,	1.43878275140273,
                         37.1,	1.43615360829058,
                         37,	1.43351974282671,
                         36.9,	1.43088115501111,
                         36.8,	1.42823784484377,
                         36.7,	1.42558981232471,
                         36.6,	1.42293705745391,
                         36.5,	1.42027958023138,
                         36.4,	1.41761738065712,
                         36.3,	1.41495045873113,
                         36.2,	1.41227881445341,
                         36.1,	1.40960244782396,
                         36,	1.40692135884277,
                         35.9,	1.40423554750986,
                         35.8,	1.40154501382521,
                         35.7,	1.39884975778884,
                         35.6,	1.39614977940073,
                         35.5,	1.39344507866089,
                         35.4,	1.39073565556932,
                         35.3,	1.38802151012602,
                         35.2,	1.38530264233099,
                         35.1,	1.38257905218423,
                         35,	1.37985073968573,
                         34.9,	1.37711770483551,
                         34.8,	1.37437994763355,
                         34.7,	1.37163746807987,
                         34.6,	1.36889026617445,
                         34.5,	1.3661383419173,
                         34.4,	1.36338169530842,
                         34.3,	1.36062032634781,
                         34.2,	1.35785423503546,
                         34.1,	1.35508342137139,
                         34,	1.35230788535559,
                         33.9,	1.34952762698805,
                         33.8,	1.34674264626879,
                         33.7,	1.34395294319779,
                         33.6,	1.34115851777506,
                         33.5,	1.3383593700006,
                         33.4,	1.33555549987441,
                         33.3,	1.33274690739649,
                         33.2,	1.32993359256684,
                         33.1,	1.32711555538545,
                         33,	1.32429279585234,
                         32.9,	1.32146531396749,
                         32.8,	1.31863310973091,
                         32.7,	1.31579618314261,
                         32.6,	1.31295453420257,
                         32.5,	1.3101081629108,
                         32.4,	1.3072570692673,
                         32.3,	1.30440125327206,
                         32.2,	1.3015407149251,
                         32.1,	1.29867545422641,
                         32,	1.29580547117598,
                         31.9,	1.29293076577383,
                         31.8,	1.29005133801994,
                         31.7,	1.28716718791432,
                         31.6,	1.28427831545697,
                         31.5,	1.28138472064789,
                         31.4,	1.27848640348708,
                         31.3,	1.27558336397454,
                         31.2,	1.27267560211026,
                         31.1,	1.26976311789426,
                         31,	1.26684591132652,
                         30.9,	1.26392398240705,
                         30.8,	1.26099733113586,
                         30.7,	1.25806595751293,
                         30.6,	1.25512986153827,
                         30.5,	1.25218904321188,
                         30.4,	1.24924350253376,
                         30.3,	1.2462932395039,
                         30.2,	1.24333825412232,
                         30.1,	1.240378546389,
                         30,	1.23741411630396,
                         29.9,	1.23444496386718,
                         29.8,	1.23147108907867,
                         29.7,	1.22849249193843,
                         29.6,	1.22550917244646,
                         29.5,	1.22252113060276,
                         29.4,	1.21952836640733,
                         29.3,	1.21653087986016,
                         29.2,	1.21352867096127,
                         29.1,	1.21052173971064,
                         29,	1.20751008610829,
                         28.9,	1.2044937101542,
                         28.8,	1.20147261184838,
                         28.7,	1.19844679119083,
                         28.6,	1.19541624818155,
                         28.5,	1.19238098282054,
                         28.4,	1.1893409951078,
                         28.3,	1.18629628504332,
                         28.2,	1.18324685262712,
                         28.1,	1.18019269785918,
                         28,	1.17713382073951,
                         27.9,	1.17407022126812,
                         27.8,	1.17100189944499,
                         27.7,	1.16792885527013,
                         27.6,	1.16485108874354,
                         27.5,	1.16176859986521,
                         27.4,	1.15868138863516,
                         27.3,	1.15558945505337,
                         27.2,	1.15249279911986,
                         27.1,	1.14939142083461,
                         27,	1.14628532019764,
                         26.9,	1.14317449720893,
                         26.8,	1.14005895186849,
                         26.7,	1.13693868417632,
                         26.6,	1.13381369413242,
                         26.5,	1.13068398173678,
                         26.4,	1.12754954698942,
                         26.3,	1.12441038989032,
                         26.2,	1.1212665104395,
                         26.1,	1.11811790863694,
                         26,	1.11496458448265,
                         25.9,	1.11180653797663,
                         25.8,	1.10864376911888,
                         25.7,	1.1054762779094,
                         25.6,	1.10230406434819,
                         25.5,	1.09912712843525,
                         25.4,	1.09594547017057,
                         25.3,	1.09275908955417,
                         25.2,	1.08956798658603,
                         25.1,	1.08637216126616,
                         25,	1.08317161359456,
                         24.9,	1.07996634357124,
                         24.8,	1.07675635119617,
                         24.7,	1.07354163646938,
                         24.6,	1.07032219939086,
                         24.5,	1.06709803996061,
                         24.4,	1.06386915817862,
                         24.3,	1.06063555404491,
                         24.2,	1.05739722755946,
                         24.1,	1.05415417872228,
                         24,	1.05090640753337,
                         23.9,	1.04765391399273,
                         23.8,	1.04439669810036,
                         23.7,	1.04113475985626,
                         23.6,	1.03786809926043,
                         23.5,	1.03459671631286,
                         23.4,	1.03132061101357,
                         23.3,	1.02803978336254,
                         23.2,	1.02475423335978,
                         23.1,	1.02146396100529,
                         23,	1.01816896629907,
                         22.9,	1.01486924924112,
                         22.8,	1.01156480983144,
                         22.7,	1.00825564807003,
                         22.6,	1.00494176395689,
                         22.5,	1.00162315749201,
                         22.4,	0.998299828675406,
                         22.3,	0.994971777507069,
                         22.2,	0.991639003987002,
                         22.1,	0.988301508115203,
                         22,	0.984959289891673,
                         21.9,	0.981612349316412,
                         21.8,	0.97826068638942,
                         21.7,	0.974904301110697,
                         21.6,	0.971543193480243,
                         21.5,	0.968177363498058,
                         21.4,	0.964806811164142,
                         21.3,	0.961431536478494,
                         21.2,	0.958051539441116,
                         21.1,	0.954666820052007,
                         21,	0.951277378311167,
                         20.9,	0.947883214218595,
                         20.8,	0.944484327774293,
                         20.7,	0.941080718978259,
                         20.6,	0.937672387830495,
                         20.5,	0.934259334330999,
                         20.4,	0.930841558479772,
                         20.3,	0.927419060276815,
                         20.2,	0.923991839722126,
                         20.1,	0.920559896815706,
                         20,	0.917123231557555,
                         19.9,	0.913681843947674,
                         19.8,	0.910235733986061,
                         19.7,	0.906784901672717,
                         19.6,	0.903329347007642,
                         19.5,	0.899869069990836,
                         19.4,	0.896404070622298,
                         19.3,	0.89293434890203,
                         19.2,	0.889459904830031,
                         19.1,	0.885980738406301,
                         19,	0.88249684963084,
                         18.9,	0.879008238503647,
                         18.8,	0.875514905024724,
                         18.7,	0.87201684919407,
                         18.6,	0.868514071011684,
                         18.5,	0.865006570477568,
                         18.4,	0.86149434759172,
                         18.3,	0.857977402354141,
                         18.2,	0.854455734764832,
                         18.1,	0.850929344823791,
                         18,	0.847398232531019,
                         17.9,	0.843862397886516,
                         17.8,	0.840321840890282,
                         17.7,	0.836776561542318,
                         17.6,	0.833226559842622,
                         17.5,	0.829671835791195,
                         17.4,	0.826112389388037,
                         17.3,	0.822548220633147,
                         17.2,	0.818979329526528,
                         17.1,	0.815405716068176,
                         17,	0.811827380258094,
                         16.9,	0.808244322096281,
                         16.8,	0.804656541582736,
                         16.7,	0.801064038717461,
                         16.6,	0.797466813500455,
                         16.5,	0.793864865931717,
                         16.4,	0.790258196011249,
                         16.3,	0.786646803739049,
                         16.2,	0.783030689115119,
                         16.1,	0.779409852139457,
                         16,	0.775784292812064,
                         15.9,	0.77215401113294,
                         15.8,	0.768519007102086,
                         15.7,	0.7648792807195,
                         15.6,	0.761234831985183,
                         15.5,	0.757585660899135,
                         15.4,	0.753931767461356,
                         15.3,	0.750273151671846,
                         15.2,	0.746609813530605,
                         15.1,	0.742941753037633,
                         15,	0.73926897019293,
                         14.9,	0.735591464996495,
                         14.8,	0.73190923744833,
                         14.7,	0.728222287548434,
                         14.6,	0.724530615296807,
                         14.5,	0.720834220693448,
                         14.4,	0.717133103738359,
                         14.3,	0.713427264431538,
                         14.2,	0.709716702772987,
                         14.1,	0.706001418762704,
                         14,	0.70228141240069,
                         13.9,	0.698556683686946,
                         13.8,	0.69482723262147,
                         13.7,	0.691093059204263,
                         13.6,	0.687354163435326,
                         13.5,	0.683610545314657,
                         13.4,	0.679862204842257,
                         13.3,	0.676109142018126,
                         13.2,	0.672351356842264,
                         13.1,	0.668588849314671,
                         13,	0.664821619435347,
                         12.9,	0.661049667204291,
                         12.8,	0.657272992621505,
                         12.7,	0.653491595686988,
                         12.6,	0.64970547640074,
                         12.5,	0.645914634762761,
                         12.4,	0.64211907077305,
                         12.3,	0.638318784431609,
                         12.2,	0.634513775738436,
                         12.1,	0.630704044693533,
                         12,	0.626889591296898,
                         11.9,	0.623070415548533,
                         11.8,	0.619246517448436,
                         11.7,	0.615417896996608,
                         11.6,	0.611584554193049,
                         11.5,	0.60774648903776,
                         11.4,	0.603903701530739,
                         11.3,	0.600056191671987,
                         11.2,	0.596203959461504,
                         11.1,	0.59234700489929,
                         11,	0.588485327985345,
                         10.9,	0.584618928719669,
                         10.8,	0.580747807102262,
                         10.7,	0.576871963133124,
                         10.6,	0.572991396812254,
                         10.5,	0.569106108139654,
                         10.4,	0.565216097115323,
                         10.3,	0.56132136373926,
                         10.2,	0.557421908011467,
                         10.1,	0.553517729931942,
                         10,	0.549608829500687,
                         9.9,	0.545695206717701,
                         9.8,	0.541776861582983,
                         9.7,	0.537853794096534,
                         9.6,	0.533926004258355,
                         9.5,	0.529993492068444,
                         9.4,	0.526056257526802,
                         9.3,	0.522114300633429,
                         9.2,	0.518167621388326,
                         9.1,	0.51421621979149,
                         9,	0.510260095842924,
                         8.9,	0.506299249542628,
                         8.8,	0.502333680890599,
                         8.7,	0.49836338988684,
                         8.6,	0.49438837653135,
                         8.5,	0.490408640824129,
                         8.4,	0.486424182765177,
                         8.3,	0.482435002354494,
                         8.2,	0.478441099592079,
                         8.1,	0.474442474477934,
                         8,	0.470439127012057,
                         7.9,	0.46643105719445,
                         7.8,	0.462418265025111,
                         7.7,	0.458400750504042,
                         7.6,	0.454378513631241,
                         7.5,	0.450351554406709,
                         7.4,	0.446319872830447,
                         7.3,	0.442283468902453,
                         7.2,	0.438242342622728,
                         7.1,	0.434196493991273,
                         7,	0.430145923008086,
                         6.9,	0.426090629673168,
                         6.8,	0.422030613986519,
                         6.7,	0.417965875948139,
                         6.6,	0.413896415558027,
                         6.5,	0.409822232816185,
                         6.4,	0.405743327722612,
                         6.3,	0.401659700277308,
                         6.2,	0.397571350480273,
                         6.1,	0.393478278331506,
                         6,	0.389380483831009,
                         5.9,	0.385277966978781,
                         5.8,	0.381170727774821,
                         5.7,	0.377058766219131,
                         5.6,	0.372942082311709,
                         5.5,	0.368820676052557,
                         5.4,	0.364694547441673,
                         5.3,	0.360563696479058,
                         5.2,	0.356428123164712,
                         5.1,	0.352287827498636,
                         5,	0.348142809480828,
                         4.9,	0.343993069111289,
                         4.8,	0.339838606390019,
                         4.7,	0.335679421317018,
                         4.6,	0.331515513892286,
                         4.5,	0.327346884115823,
                         4.4,	0.323173531987629,
                         4.3,	0.318995457507704,
                         4.2,	0.314812660676048,
                         4.1,	0.31062514149266,
                         4,	0.306432899957542,
                         3.9,	0.302235936070693,
                         3.8,	0.298034249832112,
                         3.7,	0.293827841241801,
                         3.6,	0.289616710299758,
                         3.5,	0.285400857005985,
                         3.4,	0.28118028136048,
                         3.3,	0.276954983363244,
                         3.2,	0.272724963014278,
                         3.1,	0.26849022031358,
                         3,	0.264250755261152,
                         2.9,	0.260006567856992,
                         2.8,	0.255757658101101,
                         2.7,	0.251504025993479,
                         2.6,	0.247245671534126,
                         2.5,	0.242982594723042,
                         2.4,	0.238714795560227,
                         2.3,	0.234442274045681,
                         2.2,	0.230165030179404,
                         2.1,	0.225883063961396,
                         2,	0.221596375391656,
                         1.9,	0.217304964470186,
                         1.8,	0.213008831196985,
                         1.7,	0.208707975572052,
                         1.6,	0.204402397595389,
                         1.5,	0.200092097266994,
                         1.4,	0.195777074586869,
                         1.3,	0.191457329555012,
                         1.2,	0.187132862171425,
                         1.1,	0.182803672436106,
                         1,	0.178469760349057,
                         0.900000000000002,	0.174131125910276,
                         0.800000000000001,	0.169787769119764,
                         0.700000000000001,	0.165439689977521,
                         0.600000000000001,	0.161086888483547,
                         0.500000000000002,	0.156729364637842,
                         0.400000000000002,	0.152367118440406,
                         0.300000000000001,	0.148000149891239,
                         0.200000000000001,	0.143628458990341,
                         0.100000000000001,	0.139252045737712,
                         0,	0.134870910133352,
                         -0.0999999999999996,	0.130485052177261,
                         -0.199999999999999,	0.126094471869438,
                         -0.299999999999999,	0.121699169209885,
                         -0.399999999999999,	0.117299144198601,
                         -0.499999999999998,	0.112894396835585,
                         -0.6,	0.108484927120839,
                         -0.699999999999999,	0.104070735054361,
                         -0.799999999999999,	0.099651820636153,
                         -0.899999999999999,	0.0952281838662133,
                         -0.999999999999998,	0.0907998247445427,
                         -1.1,	0.0863667432711407,
                         -1.2,	0.0819289394460083,
                         -1.3,	0.0774864132691446,
                         -1.4,	0.0730391647405498,
                         -1.5,	0.0685871938602239,
                         -1.6,	0.064130500628167,
                         -1.7,	0.0596690850443788,
                         -1.8,	0.05520294710886,
                         -1.9,	0.0507320868216101,
                         -2,	0.0462565041826287,
                         -2.1,	0.0417761991919165,
                         -2.2,	0.0372911718494732,
                         -2.3,	0.0328014221552995,
                         -2.4,	0.0283069501093939,
                         -2.5,	0.0238077557117578,
                         -2.6,	0.0193038389623901,
                         -2.7,	0.0147951998612917,
                         -2.8,	0.0102818384084626,
                         -2.9,	0.00576375460390177,
                         -3,	0.00124094844761019,
                         -3.1,	-0.00328658006041249,
                         -3.2,	0.00781883092016605,
                         -3.3,	-0.0123558041316507,
                         -3.4,	-0.0168974996948664,
                         -3.5,	-0.0214439176098133,
                         -3.6,	-0.0259950578764911,
                         -3.7,	-0.0305509204949003,
                         -3.8,	-0.0351115054650395,
                         -3.9,	-0.0396768127869109,
                         -4,	-0.0442468424605129,
                         -4.1,	-0.0488215944858461,
                         -4.2,	-0.0534010688629101,
                         -4.3,	-0.0579852655917051,
                         -4.4,	-0.0625741846722315,
                         -4.5,	-0.0671678261044887,
                         -4.6,	-0.0717661898884773,
                         -4.7,	-0.0763692760241966,
                         -4.8,	-0.0809770845116467,
                         -4.9,	-0.0855896153508281,
                         -5,	-0.0902068685417409,
                         -5.1,	-0.0948288440843842,
                         -5.2,	-0.0994555419787591,
                         -5.3,	-0.104086962224864,
                         -5.4,	-0.108723104822701,
                         -5.5,	-0.113363969772269,
                         -5.6,	-0.118009557073568,
                         -5.7,	-0.122659866726598,
                         -5.8,	-0.127314898731358,
                         -5.9,	-0.13197465308785,
                         -6,	-0.136639129796073,
                         -6.1,	-0.141308328856027,
                         -6.2,	-0.145982250267712,
                         -6.3,	-0.150660894031128,
                         -6.4,	-0.155344260146275,
                         -6.5,	-0.160032348613154,
                         -6.6,	-0.164725159431763,
                         -6.7,	-0.169422692602103,
                         -6.8,	-0.174124948124175,
                         -6.9,	-0.178831925997977,
                         -7,	-0.183543626223511,
                         -7.1,	-0.188260048800775,
                         -7.2,	-0.192981193729771,
                         -7.3,	-0.197707061010497,
                         -7.4,	-0.202437650642955,
                         -7.5,	-0.207172962627143,
                         -7.6,	-0.211912996963063,
                         -7.7,	-0.216657753650714,
                         -7.8,	-0.221407232690095,
                         -7.9,	-0.226161434081208,
                         -8,	-0.230920357824052,
                         -8.1,	-0.235684003918627,
                         -8.2,	-0.240452372364934,
                         -8.3,	-0.24522546316297,
                         -8.4,	-0.250003276312738,
                         -8.5,	-0.254785811814238,
                         -8.6,	-0.259573069667468,
                         -8.7,	-0.264365049872429,
                         -8.8,	-0.269161752429121,
                         -8.9,	-0.273963177337545,
                         -9,	-0.278769324597699,
                         -9.1,	-0.283580194209584,
                         -9.2,	-0.288395786173201
                        };
    const int mapSize = sizeof(map) / sizeof(map[0]);
    int range = -1;
    for (int i = 0; i < mapSize - 2; i += 2) {
        if (dz >= map[i + 2] && dz < map[i]) {
            range = i;
            break;
        }
    }
    if (range == -1)
        return 1000;
    float rangeSpan = map[range] - map[range + 2];
    float dist = (dz - map[range + 2]) / rangeSpan;
    float valueSpan = map[range + 1] - map[range + 3];
    return map[range + 3] + valueSpan * dist;
}

void Automator::checkWorkingState()
{
    bool working = m_lastdzValid && m_mcConnected && m_lastCoordsValid && m_enabled;
    if (working != m_working) {
        m_working = working;
        emit workingChanged();
    }
}

float Automator::minPower() const
{
    return m_minPower;
}

void Automator::setMinPower(float minPower)
{
    m_minPower = minPower;
}

float Automator::lastSentPower() const
{
    return m_lastSentPower;
}

float Automator::maxPower() const
{
    return m_maxPower;
}

void Automator::setMaxPower(float maxPower)
{
    m_maxPower = maxPower;
}

bool Automator::autosendPower() const
{
    return m_autosendPower;
}

void Automator::setAutosendPower(bool autosendPower)
{
    m_autosendPower = autosendPower;
}

bool Automator::autosendB() const
{
    return m_autosendB;
}

void Automator::setAutosendB(bool autosendB)
{
    m_autosendB = autosendB;
}

bool Automator::enabled() const
{
    return m_enabled;
}

void Automator::setEnabled(bool enabled)
{
    m_enabled = enabled;
    emit enabledChanged();
    checkWorkingState();
}

QString Automator::message() const
{
    return m_message;
}
